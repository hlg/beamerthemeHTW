% Copyright 2007 by Till Tantau
% Copyright 2012,2015 by Vedran Mileti\'c, Joseph Wright
% Copyright 2017,2018 by Louis Stuart, Joseph Wright
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file doc/licenses/LICENSE for more details.

\setbeamersize{text margin left=6mm}

\DeclareOptionBeamer{lang}{\def\beamer@HTW@lang{#1}}
\ProcessOptionsBeamer

\mode<presentation>

\setbeamertemplate{page number in head/foot}[totalframenumber]%

\defbeamertemplate{multilangpage}{de}{Seite}
\defbeamertemplate{multilangpage}{en}{Page}
\setbeamertemplate{multilangpage}[\beamer@HTW@lang]


\defbeamertemplate*{footline}{HTW}
{%
  \ifnum \theframenumber=1
    % no footline on title frame
  \vspace{-37mm}
  \begin{beamercolorbox}[wd=\paperwidth,ht=36.7mm,center]{palette secondary}
  \end{beamercolorbox}
    
  \else
  \leavevmode%
  % \hrule
  \hbox{%
  \begin{beamercolorbox}[wd=21.87mm,ht=3.28mm,dp=0.76mm,sep=0.2mm,leftskip=1.91mm]{}%
    \usebeamerfont{author in head/foot}\strut\insertshortauthor\expandafter\ifblank\expandafter{\beamer@shortinstitute}{}{~~(\insertshortinstitute)}
  \end{beamercolorbox}%
  % \rule{0.378pt}{3.28mm}
  \begin{beamercolorbox}[wd=70.4mm,ht=3.28mm,sep=0.2mm,leftskip=1.91mm]{}%
    \usebeamerfont{title in head/foot}\strut\insertshorttitle
  \end{beamercolorbox}%
  % \rule{0.378pt}{3.28mm}
  \begin{beamercolorbox}[wd=18.14mm,ht=3.28mm,sep=0.2mm,leftskip=1.91mm]{}%
    \usebeamerfont{date in head/foot}\strut\insertshortdate{} %\hspace*{2em}
  \end{beamercolorbox}%
  % \rule{0.378pt}{3.28mm}
  \begin{beamercolorbox}[wd=17.59mm,ht=3.28mm,sep=0.2mm,leftskip=1.91mm]{}%
    \usebeamerfont{page number in head/foot}\strut\usebeamertemplate{multilangpage} \insertframenumber
    % \usebeamerfont{page number in head/foot}\insertpagenumber{} %\hspace*{2em} 
  \end{beamercolorbox}}%
  %\vskip0pt%
  \fi
}

\defbeamertemplate*{headline}{} % title is in headline space

\defbeamertemplate*{sidebar right}{} % no logo

\defbeamertemplate*{frametitle}{HTW}[1][left]
{%
  \vspace{2.52mm}
  \leavevmode%
  \hbox{%
  %\hspace{6.05mm}
  \begin{beamercolorbox}[wd=76.60mm,sep=1.1mm,leftskip=-1.1mm]{frametitle} %palette quaternary} 
    \usebeamerfont{frametitle}%
    \strut\insertframetitle\strut\par%
  \end{beamercolorbox}%
  \hspace{6.05mm}
  \begin{beamercolorbox}[wd=32.75mm]{} %palette primary}
     % \insertlogo
  \end{beamercolorbox}%
  }
  
  {\usebeamercolor[fg]{palette primary} \hrule width 76.60mm  }
}

\defbeamertemplate*{title page}{customized}[1][]
{
  \vspace{-15mm}
  \usebeamercolor[fg]{titlegraphic}\hspace{-4.3mm}\inserttitlegraphic % contains protection zone
  \vspace{5mm}

  \usebeamerfont{title}\inserttitle\par
  \usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par
  \bigskip
  \usebeamerfont{author}\insertauthor\par
  \usebeamerfont{institute}\insertinstitute\par
  \usebeamerfont{date}\insertdate\par
  \vfill

}


\setbeamersize{text margin left=6.3mm,text margin right=6.3mm}

\mode
<all>
